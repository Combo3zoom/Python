import Validation
from Container import Container
from JobFile import readFile, writeFile


def printCategories(function):
    def wrapper(value):
        print("Select one of the categories: \n"
              "ID, recipientName, recipientIban, bank, paymentType, amount, paymentDatetime")
        function(value)

    return wrapper


def UserChoosee():
    return Validation.UserChoose(input("Enter 1 - 8 or exit: "))


def addReceiptHandle(a):
    a.addReceipt(Container(Validation.CheckID(input("Enter ID: ")),
                           Validation.CheckName(input("Enter name: ")),
                           Validation.CheckIban(input("Enter iban: ")),
                           Validation.CheckBank(input("Enter bank(privatbank or universalbank): ")),
                           Validation.CheckPaymentType(input("Enter payment type(card, NFC): ")),
                           Validation.Amount(input("Enter amount money: ")),
                           Validation.CheckMounthDay(input("Enter date: "))))
    return a


def addReceiptFromFile(a):
    readFile(Validation.ExistFile(input("Enter information file: ")))
    return


def writeReceiptInFile(a):
    writeFile(Validation.ExistFile(input("Enter result file: ")), a.getList())
    return


def printAll(a):
    a.print()
    return

@printCategories
def foundSomething(a):
    category = Validation.IsCategory(input("Enter categoty: "))
    value = input("Enter value, which you want to find: ")
    Validation.CheckRandomValue(category, value)

    a.find(category, value)
    return

@printCategories
def sortReceipt(a):
    a.sort(Validation.IsCategory(input("Enter category: ")))
    return

@printCategories
def deleteReceipt(a):
    category = Validation.IsCategory(input("Enter categoty: "))

    value = input("Enter value, which want to delete ")
    Validation.CheckRandomValue(category, value)

    a.deleteReceipt(category, value),
    writeFile('FileResult.txt', a.getList())
    return a


def editReceipt(a):
    id = Validation.CheckID(input("Enter id element, which want to edit: "))
    category = Validation.IsCategory(input("Enter categoty: "))
    value = input("Enter value, which want to replace ")
    Validation.CheckRandomValue(category, value)

    a.EditReceipt(id, category, value)
    return a
